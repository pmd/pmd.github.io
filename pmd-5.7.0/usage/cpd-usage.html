<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia at 2017-05-20 
 | Rendered using Apache Maven Fluido Skin 1.4
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20170520" />
    <meta http-equiv="Content-Language" content="en" />
    <title>PMD &#x2013; Finding duplicated code</title>
    <link rel="stylesheet" href="../css/apache-maven-fluido-1.4.min.css" />
    <link rel="stylesheet" href="../css/site.css" />
    <link rel="stylesheet" href="../css/print.css" media="print" />

      
    <script type="text/javascript" src="../js/apache-maven-fluido-1.4.min.js"></script>

    
                  </head>
        <body class="topBarEnabled">
          
    
    
            
    
        
    <a href="https://github.com/pmd/pmd">
      <img style="position: absolute; top: 0; right: 0; border: 0; z-index: 10000;"
        src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png"
        alt="Fork me on GitHub">
    </a>
  
                
                    
                

    <div id="topbar" class="navbar navbar-fixed-top ">
      <div class="navbar-inner">
                <div class="container-fluid">
        <a data-target=".nav-collapse" data-toggle="collapse" class="btn btn-navbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
                
                                                                                <a class="brand" href="../index.html"  title="PMD">

                                
                                                                                                                    <img src="../images/logo/pmd_logo_tiny.png" alt="PMD" />
                
                </a>
                    
                                <ul class="nav">
                          <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Overview <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="https://sourceforge.net/projects/pmd/files/pmd/5.7.0/"  title="Download PMD 5.7.0">Download PMD 5.7.0</a>
</li>
                  
                      <li>      <a href="../overview/changelog.html"  title="What's new in PMD 5.7.0">What's new in PMD 5.7.0</a>
</li>
                  
                      <li>      <a href="../overview/changelog-old.html"  title="Previous versions">Previous versions</a>
</li>
                  
                      <li>      <a href="../overview/news.html"  title="PMD in the news">PMD in the news</a>
</li>
                  
                      <li>      <a href="../overview/products.html"  title="PMD-related products and books">PMD-related products and books</a>
</li>
                  
                      <li>      <a href="../overview/bestpractices.html"  title="Best practices">Best practices</a>
</li>
                  
                      <li>      <a href="../overview/future.html"  title="Future directions">Future directions</a>
</li>
                  
                      <li>      <a href="../overview/similar-projects.html"  title="Similar projects">Similar projects</a>
</li>
                  
                      <li>      <a href="../overview/credits.html"  title="Credits">Credits</a>
</li>
                  
                      <li>      <a href="../overview/license.html"  title="License">License</a>
</li>
                  
                      <li>      <a href="../overview/meaning.html"  title="What does 'PMD' mean?">What does 'PMD' mean?</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Usage <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../usage/installing.html"  title="Installation">Installation</a>
</li>
                  
                      <li>      <a href="../usage/running.html"  title="PMD: Command line usage">PMD: Command line usage</a>
</li>
                  
                      <li>      <a href="../usage/ant-task.html"  title="PMD: Ant task usage">PMD: Ant task usage</a>
</li>
                  
                      <li>      <a href="../usage/suppressing.html"  title="PMD: Suppressing warnings">PMD: Suppressing warnings</a>
</li>
                  
                      <li>      <a href="../usage/cpd-usage.html"  title="CPD: Finding duplicated code">CPD: Finding duplicated code</a>
</li>
                  
                      <li>      <a href="../usage/maven-plugin.html"  title="Maven 1 plugin usage">Maven 1 plugin usage</a>
</li>
                  
                      <li>      <a href="../usage/mvn-plugin.html"  title="Mvn 2/3 plugin usage">Mvn 2/3 plugin usage</a>
</li>
                  
                      <li>      <a href="../usage/integrations.html"  title="IDE plugin usage">IDE plugin usage</a>
</li>
                  
                      <li>      <a href="../usage/jspsupport.html"  title="JSP support">JSP support</a>
</li>
                  
                      <li>      <a href="../usage/ci-plugins.html"  title="CI Plugins">CI Plugins</a>
</li>
                  
                      <li>      <a href="../usage/faq.html"  title="FAQ">FAQ</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Customizing PMD <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../customizing/compiling.html"  title="Compiling PMD">Compiling PMD</a>
</li>
                  
                      <li>      <a href="../customizing/howtowritearule.html"  title="How to write a rule">How to write a rule</a>
</li>
                  
                      <li>      <a href="../customizing/xpathruletutorial.html"  title="Writing XPath rules">Writing XPath rules</a>
</li>
                  
                      <li>      <a href="../customizing/howtomakearuleset.html"  title="How to make a rule set">How to make a rule set</a>
</li>
                  
                      <li>      <a href="../customizing/howitworks.html"  title="How it works">How it works</a>
</li>
                  
                      <li>      <a href="../customizing/rule-guidelines.html"  title="Rule guidelines">Rule guidelines</a>
</li>
                  
                      <li>      <a href="../customizing/pmd-developer.html"  title="PMD developers information">PMD developers information</a>
</li>
                  
                      <li>      <a href="../customizing/pmd-release-process.html"  title="PMD Release Process">PMD Release Process</a>
</li>
                  
                      <li>      <a href="../customizing/new-language.html"  title="New Language">New Language</a>
</li>
                  
                      <li>      <a href="../customizing/cpd-parser-howto.html"  title="New CPD Language">New CPD Language</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">For example <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../../scoreboard.html"  title="Run PMD on a Sourceforge project">Run PMD on a Sourceforge project</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Misc. <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="http://webhostinggeeks.com/science/xpath-sourceforge-ka"  title="XPath tutorial (Gregorian)">XPath tutorial (Gregorian)</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Modules <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li>      <a href="../pmd-core/index.html"  title="PMD Core">PMD Core</a>
</li>
                  
                      <li>      <a href="../pmd-cpp/index.html"  title="PMD C++">PMD C++</a>
</li>
                  
                      <li>      <a href="../pmd-cs/index.html"  title="PMD C#">PMD C#</a>
</li>
                  
                      <li>      <a href="../pmd-dist/index.html"  title="PMD Distribution Packages">PMD Distribution Packages</a>
</li>
                  
                      <li>      <a href="../pmd-fortran/index.html"  title="PMD Fortran">PMD Fortran</a>
</li>
                  
                      <li>      <a href="../pmd-go/index.html"  title="PMD Go">PMD Go</a>
</li>
                  
                      <li>      <a href="../pmd-groovy/index.html"  title="PMD Groovy">PMD Groovy</a>
</li>
                  
                      <li>      <a href="../pmd-java/index.html"  title="PMD Java">PMD Java</a>
</li>
                  
                      <li>      <a href="../pmd-javascript/index.html"  title="PMD JavaScript">PMD JavaScript</a>
</li>
                  
                      <li>      <a href="../pmd-jsp/index.html"  title="PMD JSP">PMD JSP</a>
</li>
                  
                      <li>      <a href="../pmd-matlab/index.html"  title="PMD Matlab">PMD Matlab</a>
</li>
                  
                      <li>      <a href="../pmd-objectivec/index.html"  title="PMD Objective-C">PMD Objective-C</a>
</li>
                  
                      <li>      <a href="../pmd-perl/index.html"  title="PMD Perl">PMD Perl</a>
</li>
                  
                      <li>      <a href="../pmd-php/index.html"  title="PMD PHP">PMD PHP</a>
</li>
                  
                      <li>      <a href="../pmd-plsql/index.html"  title="PMD PL/SQL">PMD PL/SQL</a>
</li>
                  
                      <li>      <a href="../pmd-python/index.html"  title="PMD Python">PMD Python</a>
</li>
                  
                      <li>      <a href="../pmd-ruby/index.html"  title="PMD Ruby">PMD Ruby</a>
</li>
                  
                      <li>      <a href="../pmd-swift/index.html"  title="PMD Swift">PMD Swift</a>
</li>
                  
                      <li>      <a href="../pmd-test/index.html"  title="PMD Test Framework">PMD Test Framework</a>
</li>
                  
                      <li>      <a href="../pmd-visualforce/index.html"  title="PMD Visualforce">PMD Visualforce</a>
</li>
                  
                      <li>      <a href="../pmd-vm/index.html"  title="PMD Velocity">PMD Velocity</a>
</li>
                  
                      <li>      <a href="../pmd-xml/index.html"  title="PMD XML and XSL">PMD XML and XSL</a>
</li>
                  
                      <li>      <a href="../pmd-apex/index.html"  title="PMD Apex">PMD Apex</a>
</li>
                  
                      <li>      <a href="../pmd-java8/index.html"  title="PMD Java 8 Integration">PMD Java 8 Integration</a>
</li>
                  
                      <li>      <a href="../pmd-ui/index.html"  title="PMD UI Applications">PMD UI Applications</a>
</li>
                  
                      <li>      <a href="../pmd-scala/index.html"  title="PMD Scala">PMD Scala</a>
</li>
                          </ul>
      </li>
                <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown">Project Documentation <b class="caret"></b></a>
        <ul class="dropdown-menu">
        
                      <li class="dropdown-submenu">
                                      <a href="../project-info.html"  title="Project Information">Project Information</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../project-summary.html"  title="Project Summary">Project Summary</a>
</li>
                                  <li>      <a href="../dependency-convergence.html"  title="Dependency Convergence">Dependency Convergence</a>
</li>
                                  <li>      <a href="../dependency-info.html"  title="Dependency Information">Dependency Information</a>
</li>
                                  <li>      <a href="../dependency-management.html"  title="Dependency Management">Dependency Management</a>
</li>
                                  <li>      <a href="../modules.html"  title="Project Modules">Project Modules</a>
</li>
                                  <li>      <a href="../plugin-management.html"  title="Plugin Management">Plugin Management</a>
</li>
                                  <li>      <a href="../plugins.html"  title="Project Plugins">Project Plugins</a>
</li>
                                  <li>      <a href="../team-list.html"  title="Project Team">Project Team</a>
</li>
                                  <li>      <a href="../mail-lists.html"  title="Mailing Lists">Mailing Lists</a>
</li>
                                  <li>      <a href="../integration.html"  title="Continuous Integration">Continuous Integration</a>
</li>
                                  <li>      <a href="../issue-tracking.html"  title="Issue Tracking">Issue Tracking</a>
</li>
                                  <li>      <a href="../license.html"  title="Project License">Project License</a>
</li>
                                  <li>      <a href="../source-repository.html"  title="Source Repository">Source Repository</a>
</li>
                              </ul>
            </li>
                  
                      <li class="dropdown-submenu">
                                      <a href="../project-reports.html"  title="Project Reports">Project Reports</a>
              <ul class="dropdown-menu">
                                  <li>      <a href="../xref/index.html"  title="Source Xref">Source Xref</a>
</li>
                                  <li>      <a href="../xref-test/index.html"  title="Test Source Xref">Test Source Xref</a>
</li>
                                  <li>      <a href="../apidocs/index.html"  title="JavaDocs">JavaDocs</a>
</li>
                                  <li>      <a href="../testapidocs/index.html"  title="Test JavaDocs">Test JavaDocs</a>
</li>
                                  <li>      <a href="../surefire-report.html"  title="Surefire Report">Surefire Report</a>
</li>
                                  <li>      <a href="../dependency-updates-report.html"  title="Dependency Updates Report">Dependency Updates Report</a>
</li>
                                  <li>      <a href="../plugin-updates-report.html"  title="Plugin Updates Report">Plugin Updates Report</a>
</li>
                                  <li>      <a href="../property-updates-report.html"  title="Property Updates Report">Property Updates Report</a>
</li>
                              </ul>
            </li>
                          </ul>
      </li>
                  </ul>
          
          
          
                               <ul class="nav pull-right">
              <li class="dropdown">
                <a href="#" class="dropdown-toggle" data-toggle="dropdown">External Links <b class="caret"></b></a>
                <ul class="dropdown-menu">
                      <li>      <a href="http://sourceforge.net/projects/pmd"  title="SourceForge.net Project Page">SourceForge.net Project Page</a>
</li>
      <li>      <a href="http://sourceforge.net"  title="Hosted by SourceForge">Hosted by SourceForge</a>
</li>
                  </ul>
              </li>
            </ul>
          
                      </div>
          
        </div>
      </div>
    </div>
    
        <div class="container-fluid">
          <div id="banner">
        <div class="pull-left">
                                    <a href="http://pmd.sourceforge.net/" id="bannerLeft">
                                                                                                <img src="../images/logo/pmd_logo_small.png"  alt="pmd-logo"/>
                </a>
                      </div>
        <div class="pull-right">                  <a href="http://sourceforge.net/" id="bannerRight">
                                                                                                <img src="../images/sflogo.png"  alt="SourceForge"/>
                </a>
      </div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
                
                    
                  <li id="publishDate">Last Published: 2017-05-20
                      <span class="divider">|</span>
                   </li>
                  <li id="projectVersion">Version: 5.7.0
                          <span class="divider">|</span>
                      </li>
                                      <li class="">
                    <a href="http://www.sourceforge.net/" class="externalLink" title="SourceForge">
        SourceForge</a>
                    <span class="divider">/</span>
      </li>
            <li class="">
                    <a href="http://pmd.sourceforge.net/" class="externalLink" title="PMD">
        PMD</a>
                    <span class="divider">/</span>
      </li>
        <li class="active ">Finding duplicated code</li>
                
                
                    
      
                            </ul>
      </div>

            
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
                
                    
                <ul class="nav nav-list">
                    <li class="nav-header">Overview</li>
                              
      <li>
  
                          <a href="https://sourceforge.net/projects/pmd/files/pmd/5.7.0/" class="externalLink" title="Download PMD 5.7.0">
          <span class="none"></span>
        Download PMD 5.7.0</a>
            </li>
                
      <li>
  
                          <a href="../overview/changelog.html" title="What's new in PMD 5.7.0">
          <span class="none"></span>
        What's new in PMD 5.7.0</a>
            </li>
                
      <li>
  
                          <a href="../overview/changelog-old.html" title="Previous versions">
          <span class="none"></span>
        Previous versions</a>
            </li>
                
      <li>
  
                          <a href="../overview/news.html" title="PMD in the news">
          <span class="none"></span>
        PMD in the news</a>
            </li>
                
      <li>
  
                          <a href="../overview/products.html" title="PMD-related products and books">
          <span class="none"></span>
        PMD-related products and books</a>
            </li>
                
      <li>
  
                          <a href="../overview/bestpractices.html" title="Best practices">
          <span class="none"></span>
        Best practices</a>
            </li>
                
      <li>
  
                          <a href="../overview/future.html" title="Future directions">
          <span class="none"></span>
        Future directions</a>
            </li>
                
      <li>
  
                          <a href="../overview/similar-projects.html" title="Similar projects">
          <span class="none"></span>
        Similar projects</a>
            </li>
                
      <li>
  
                          <a href="../overview/credits.html" title="Credits">
          <span class="none"></span>
        Credits</a>
            </li>
                
      <li>
  
                          <a href="../overview/license.html" title="License">
          <span class="none"></span>
        License</a>
            </li>
                
      <li>
  
                          <a href="../overview/meaning.html" title="What does 'PMD' mean?">
          <span class="none"></span>
        What does 'PMD' mean?</a>
            </li>
                              <li class="nav-header">Usage</li>
                              
      <li>
  
                          <a href="../usage/installing.html" title="Installation">
          <span class="none"></span>
        Installation</a>
            </li>
                
      <li>
  
                          <a href="../usage/running.html" title="PMD: Command line usage">
          <span class="none"></span>
        PMD: Command line usage</a>
            </li>
                
      <li>
  
                          <a href="../usage/ant-task.html" title="PMD: Ant task usage">
          <span class="none"></span>
        PMD: Ant task usage</a>
            </li>
                
      <li>
  
                          <a href="../usage/suppressing.html" title="PMD: Suppressing warnings">
          <span class="none"></span>
        PMD: Suppressing warnings</a>
            </li>
                
      <li class="active">
  
            <a href="#"><span class="none"></span>CPD: Finding duplicated code</a>
          </li>
                
      <li>
  
                          <a href="../usage/maven-plugin.html" title="Maven 1 plugin usage">
          <span class="none"></span>
        Maven 1 plugin usage</a>
            </li>
                
      <li>
  
                          <a href="../usage/mvn-plugin.html" title="Mvn 2/3 plugin usage">
          <span class="none"></span>
        Mvn 2/3 plugin usage</a>
            </li>
                
      <li>
  
                          <a href="../usage/integrations.html" title="IDE plugin usage">
          <span class="none"></span>
        IDE plugin usage</a>
            </li>
                
      <li>
  
                          <a href="../usage/jspsupport.html" title="JSP support">
          <span class="none"></span>
        JSP support</a>
            </li>
                
      <li>
  
                          <a href="../usage/ci-plugins.html" title="CI Plugins">
          <span class="none"></span>
        CI Plugins</a>
            </li>
                
      <li>
  
                          <a href="../usage/faq.html" title="FAQ">
          <span class="none"></span>
        FAQ</a>
            </li>
                              <li class="nav-header">Customizing PMD</li>
                              
      <li>
  
                          <a href="../customizing/compiling.html" title="Compiling PMD">
          <span class="none"></span>
        Compiling PMD</a>
            </li>
                
      <li>
  
                          <a href="../customizing/howtowritearule.html" title="How to write a rule">
          <span class="none"></span>
        How to write a rule</a>
            </li>
                
      <li>
  
                          <a href="../customizing/xpathruletutorial.html" title="Writing XPath rules">
          <span class="none"></span>
        Writing XPath rules</a>
            </li>
                
      <li>
  
                          <a href="../customizing/howtomakearuleset.html" title="How to make a rule set">
          <span class="none"></span>
        How to make a rule set</a>
            </li>
                
      <li>
  
                          <a href="../customizing/howitworks.html" title="How it works">
          <span class="none"></span>
        How it works</a>
            </li>
                
      <li>
  
                          <a href="../customizing/rule-guidelines.html" title="Rule guidelines">
          <span class="none"></span>
        Rule guidelines</a>
            </li>
                
      <li>
  
                          <a href="../customizing/pmd-developer.html" title="PMD developers information">
          <span class="none"></span>
        PMD developers information</a>
            </li>
                
      <li>
  
                          <a href="../customizing/pmd-release-process.html" title="PMD Release Process">
          <span class="none"></span>
        PMD Release Process</a>
            </li>
                
      <li>
  
                          <a href="../customizing/new-language.html" title="New Language">
          <span class="none"></span>
        New Language</a>
            </li>
                
      <li>
  
                          <a href="../customizing/cpd-parser-howto.html" title="New CPD Language">
          <span class="none"></span>
        New CPD Language</a>
            </li>
                              <li class="nav-header">For example</li>
                              
      <li>
  
                          <a href="../../scoreboard.html" title="Run PMD on a Sourceforge project">
          <span class="none"></span>
        Run PMD on a Sourceforge project</a>
            </li>
                              <li class="nav-header">Misc.</li>
                              
      <li>
  
                          <a href="http://webhostinggeeks.com/science/xpath-sourceforge-ka" class="externalLink" title="XPath tutorial (Gregorian)">
          <span class="none"></span>
        XPath tutorial (Gregorian)</a>
            </li>
                              <li class="nav-header">Modules</li>
                              
      <li>
  
                          <a href="../pmd-core/index.html" title="PMD Core">
          <span class="none"></span>
        PMD Core</a>
            </li>
                
      <li>
  
                          <a href="../pmd-cpp/index.html" title="PMD C++">
          <span class="none"></span>
        PMD C++</a>
            </li>
                
      <li>
  
                          <a href="../pmd-cs/index.html" title="PMD C#">
          <span class="none"></span>
        PMD C#</a>
            </li>
                
      <li>
  
                          <a href="../pmd-dist/index.html" title="PMD Distribution Packages">
          <span class="none"></span>
        PMD Distribution Packages</a>
            </li>
                
      <li>
  
                          <a href="../pmd-fortran/index.html" title="PMD Fortran">
          <span class="none"></span>
        PMD Fortran</a>
            </li>
                
      <li>
  
                          <a href="../pmd-go/index.html" title="PMD Go">
          <span class="none"></span>
        PMD Go</a>
            </li>
                
      <li>
  
                          <a href="../pmd-groovy/index.html" title="PMD Groovy">
          <span class="none"></span>
        PMD Groovy</a>
            </li>
                
      <li>
  
                          <a href="../pmd-java/index.html" title="PMD Java">
          <span class="none"></span>
        PMD Java</a>
            </li>
                
      <li>
  
                          <a href="../pmd-javascript/index.html" title="PMD JavaScript">
          <span class="none"></span>
        PMD JavaScript</a>
            </li>
                
      <li>
  
                          <a href="../pmd-jsp/index.html" title="PMD JSP">
          <span class="none"></span>
        PMD JSP</a>
            </li>
                
      <li>
  
                          <a href="../pmd-matlab/index.html" title="PMD Matlab">
          <span class="none"></span>
        PMD Matlab</a>
            </li>
                
      <li>
  
                          <a href="../pmd-objectivec/index.html" title="PMD Objective-C">
          <span class="none"></span>
        PMD Objective-C</a>
            </li>
                
      <li>
  
                          <a href="../pmd-perl/index.html" title="PMD Perl">
          <span class="none"></span>
        PMD Perl</a>
            </li>
                
      <li>
  
                          <a href="../pmd-php/index.html" title="PMD PHP">
          <span class="none"></span>
        PMD PHP</a>
            </li>
                
      <li>
  
                          <a href="../pmd-plsql/index.html" title="PMD PL/SQL">
          <span class="none"></span>
        PMD PL/SQL</a>
            </li>
                
      <li>
  
                          <a href="../pmd-python/index.html" title="PMD Python">
          <span class="none"></span>
        PMD Python</a>
            </li>
                
      <li>
  
                          <a href="../pmd-ruby/index.html" title="PMD Ruby">
          <span class="none"></span>
        PMD Ruby</a>
            </li>
                
      <li>
  
                          <a href="../pmd-swift/index.html" title="PMD Swift">
          <span class="none"></span>
        PMD Swift</a>
            </li>
                
      <li>
  
                          <a href="../pmd-test/index.html" title="PMD Test Framework">
          <span class="none"></span>
        PMD Test Framework</a>
            </li>
                
      <li>
  
                          <a href="../pmd-visualforce/index.html" title="PMD Visualforce">
          <span class="none"></span>
        PMD Visualforce</a>
            </li>
                
      <li>
  
                          <a href="../pmd-vm/index.html" title="PMD Velocity">
          <span class="none"></span>
        PMD Velocity</a>
            </li>
                
      <li>
  
                          <a href="../pmd-xml/index.html" title="PMD XML and XSL">
          <span class="none"></span>
        PMD XML and XSL</a>
            </li>
                
      <li>
  
                          <a href="../pmd-apex/index.html" title="PMD Apex">
          <span class="none"></span>
        PMD Apex</a>
            </li>
                
      <li>
  
                          <a href="../pmd-java8/index.html" title="PMD Java 8 Integration">
          <span class="none"></span>
        PMD Java 8 Integration</a>
            </li>
                
      <li>
  
                          <a href="../pmd-ui/index.html" title="PMD UI Applications">
          <span class="none"></span>
        PMD UI Applications</a>
            </li>
                
      <li>
  
                          <a href="../pmd-scala/index.html" title="PMD Scala">
          <span class="none"></span>
        PMD Scala</a>
            </li>
                              <li class="nav-header">Project Documentation</li>
                                                                                                                                                                                                                                                                                                        
      <li>
  
                          <a href="../project-info.html" title="Project Information">
          <span class="icon-chevron-right"></span>
        Project Information</a>
                  </li>
                                                                                                                                                                                                
      <li>
  
                          <a href="../project-reports.html" title="Project Reports">
          <span class="icon-chevron-right"></span>
        Project Reports</a>
                  </li>
            </ul>
                
                    
                
          <hr />

           <div id="poweredBy">
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                            <div class="clear"></div>
                                                                                                                   <a href="http://maven.apache.org/" title="Maven" class="builtBy">
        <img class="builtBy"  alt="Built by Maven" src="http://maven.apache.org/images/logos/maven-feather.png"    />
      </a>
                                                                                                    <a href="http://sourceforge.net/" title="SourceForge.net" class="builtBy">
        <img class="builtBy"  alt="SourceForge.net. Fast, secure and Free Open Source software downloads" src="http://sflogo.sourceforge.net/sflogo.php?group_id=56262&type=10"   width="80"  height="15" />
      </a>
                      </div>
          </div>
        </div>
        
                
        <div id="bodyColumn"  class="span10" >
                                  
            <!-- <author email="tom@infoether.com">Tom Copeland</author> --><h1>Finding duplicated code</h1>
<p>Or how to find copied and pasted code</p>

<ul>
  
<li><a href="#Overview">Overview</a></li>
  
<li><a href="#Command_line_usage">Command line usage</a></li>
  
<li><a href="#Ant_task">Ant task</a></li>
  
<li><a href="#GUI">GUI</a></li>
  
<li><a href="#Suppression">Suppression</a></li>
</ul>
<div class="section">
<h2><a name="Overview"></a>Overview</h2>
<p>Duplicate code can be hard to find, especially in a large project. But PMD&#x2019;s Copy/Paste Detector (CPD) can find it for you! CPD has been through three major incarnations:</p>

<ul>
  
<li>
<p>First we wrote it using a variant of Michael Wise&#x2019;s Greedy String Tiling algorithm (our variant is described <a class="externalLink" href="http://www.onjava.com/pub/a/onjava/2003/03/12/pmd_cpd.html">here</a>).</p></li>
  
<li>
<p>Then it was completely rewritten by Brian Ewins using the <a class="externalLink" href="http://dogma.net/markn/articles/bwt/bwt.htm">Burrows-Wheeler transform</a>.</p></li>
  
<li>
<p>Finally, it was rewritten by Steve Hawkins to use the <a class="externalLink" href="http://www.nist.gov/dads/HTML/karpRabin.html">Karp-Rabin</a> string matching algorithm.</p></li>
</ul>
<p>Each rewrite made it much faster, and now it can process the JDK 1.4 java.* packages in about 4 seconds (on my workstation, at least).</p>
<p>Note that CPD works with Java, JSP, C, C++, C#, Fortran and PHP code and some more languages. For the full list, see below <a href="#Supported_Languages">Supported Languages</a>.</p>
<p>Your own language is missing? See how to add it <a href="../customizing/cpd-parser-howto.html">here</a>.</p>
<p>CPD is included with PMD, which you can download <a class="externalLink" href="http://sourceforge.net/projects/pmd/files/pmd/">here</a>. Or, if you have <a class="externalLink" href="http://java.sun.com/products/javawebstart/">Java Web Start</a>, you can <a class="externalLink" href="http://pmd.sourceforge.net/cpd.jnlp">run CPD by clicking here</a>.</p>
<p><a href="./cpdresults.txt">Here</a> are the duplicates CPD found in the JDK 1.4 source code.</p>
<p><a href="./cpp_cpdresults.txt">Here</a> are the duplicates CPD found in the APACHE_2_0_BRANCH branch of Apache (just the <tt>httpd-2.0/server/</tt> directory).</p></div>
<div class="section">
<h2><a name="Command_line_usage"></a>Command line usage</h2>
<div class="section">
<h3><a name="Windows"></a>Windows</h3>
<p>CPD comes with its own starter batch file: <tt>cpd.bat</tt>. It&#x2019;s located in the <tt>bin</tt> subdirectory in the PMD binary distribution zip-file. Let&#x2019;s assume, you are in this directory, then you can start CPD this way:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">cpd.bat --minimum-tokens 100 --files c:\temp\src\java
</pre></div></div>
<p>The options &#x201c;minimum-tokens&#x201d; and &#x201c;files&#x201d; are the two required options; there are more options, see below.</p></div>
<div class="section">
<h3><a name="Linux"></a>Linux</h3>
<p>For Linux, there is since PMD 5.0 a combined start script for all command line tools. This includes CPD. The start script is called <tt>run.sh</tt> and is located in the <tt>bin</tt> subdirectory in the PMD binary distribution zip-file. Let&#x2019;s assume, you are in this directory, then you can start CPD this way:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">./run.sh cpd --minimum-tokens 100 --files c:\temp\src\java
</pre></div></div>
<p>The options &#x201c;minimum-tokens&#x201d; and &#x201c;files&#x201d; are the two required options; there are more options, see below.</p></div>
<div class="section">
<h3><a name="Options"></a>Options</h3>

<table border="0" class="table table-striped">
    
<tr class="a">
        
<th>Option</th>
        
<th>Description</th>
        
<th>Required</th>
        
<th>Applies for language</th>
    </tr>
    
<tr class="b">
        
<td>--minimum-tokens</td>
        
<td>The minimum token length which should be reported as a duplicate.</td>
        
<td>yes</td>
        
<td></td>
    </tr>
    
<tr class="a">
        
<td>--files</td>
        
<td>List of files and directories to process</td>
        
<td>yes</td>
        
<td></td>
    </tr>
    
<tr class="b">
        
<td>--filelist</td>
        
<td>Path to file containing a comma delimited list of files to analyze. If this is given, then you don't need to provide `--files`.</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="a">
        
<td>--language</td>
        
<td>Sources code language. Default value is `java`</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="b">
        
<td>--encoding</td>
        
<td>Character encoding to use when processing files</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="a">
        
<td>--skip-duplicate-files</td>
        
<td>Ignore multiple copies of files of the same name and length in comparison.</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="b">
        
<td>--exclude</td>
        
<td>Files to be excluded from CPD check</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="a">
        
<td>--non-recursive</td>
        
<td>Don't scan subdirectiories</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="b">
        
<td>--skip-lexical-errors</td>
        
<td>Skip files which can't be tokenized due to invalid characters instead of aborting CPD</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="a">
        
<td>--format</td>
        
<td>Report format. Default value is `text`.</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="b">
        
<td>--failOnViolation {true|false}</td>
        
<td>By default CPD exits with status 4 if code duplications are found.
            Disable this option with '--failOnViolation false' to exit with 0 instead and just write the report.</td>
        
<td>no</td>
        
<td></td>
    </tr>
    
<tr class="a">
        
<td>--ignore-literals</td>
        
<td>Ignore number values and string contents when comparing text</td>
        
<td>no</td>
        
<td>java</td>
    </tr>
    
<tr class="b">
        
<td>--ignore-identifiers</td>
        
<td>Ignore constant and variable names when comparing text</td>
        
<td>no</td>
        
<td>java</td>
    </tr>
    
<tr class="a">
        
<td>--ignore-annotations</td>
        
<td>Ignore language annotations when comparing text</td>
        
<td>no</td>
        
<td>java</td>
    </tr>
    
<tr class="b">
        
<td>--ignore-usings</td>
        
<td>Ignore using directives in C# when comparing text</td>
        
<td>no</td>
        
<td>C#</td>
    </tr>
    
<tr class="a">
        
<td>--no-skip-blocks</td>
        
<td>Do not skip code blocks marked with --skip-blocks-pattern (e.g. #if 0 until #endif)</td>
        
<td>no</td>
        
<td>cpp</td>
    </tr>
    
<tr class="b">
        
<td>--skip-blocks-pattern</td>
        
<td>
            Pattern to find the blocks to skip. Start and End pattern separated by |.
            Default is `#if 0|#endif`.
        </td>
        
<td>no</td>
        
<td>cpp</td>
    </tr>
    
<tr class="a">
        
<td>--uri</td>
        
<td>URI to process</td>
        
<td>no</td>
        
<td>plsql</td>
    </tr>
    
<tr class="b">
        
<td>--help / -h</td>
        
<td>Print help text</td>
        
<td>no</td>
        
<td></td>
    </tr>
</table></div>
<div class="section">
<h3><a name="Examples"></a>Examples</h3>
<p><i>Note:</i> The following example use the Linux start script. For Windows, just replace &#x201c;./run.sh cpd&#x201d; by &#x201c;cpd.bat&#x201d;.</p>
<p>Minimum required options: Just give it the minimum duplicate size and the source directory:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --files /usr/local/java/src/java
</pre></div></div>
<p>You can also specify the language:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --files /path/to/c/source --language cpp
</pre></div></div>
<p>You may wish to check sources that are stored in different directories:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --files /path/to/other/source  --files /path/to/other/source --files /path/to/other/source --language fortran
</pre></div></div>
<p><i>There should be no limit to the number of &#x2018;&#x2013;files&#x2019;, you may add&#x2026; But if you stumble one, please tell us !</i></p>
<p>And if you&#x2019;re checking a C source tree with duplicate files in different architecture directories you can skip those using &#x2013;skip-duplicate-files:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --files /path/to/c/source --language cpp --skip-duplicate-files
</pre></div></div>
<p>You can also specify the encoding to use when parsing files:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --files /usr/local/java/src/java --encoding utf-16le
</pre></div></div>
<p>You can also specify a report format - here we&#x2019;re using the XML report:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --files /usr/local/java/src/java --format xml
</pre></div></div>
<p>The default format is a text report, and there&#x2019;s also a <tt>csv</tt> report.</p>
<p>Note that CPD is pretty memory-hungry; you may need to give Java more memory to run it, like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ export HEAPSIZE=512m
$ ./run.sh cpd --minimum-tokens 100 --files /usr/local/java/src/java
</pre></div></div>
<p>In order to change the heap size under Windows, you&#x2019;ll need to edit the batch file <tt>cpd.bat</tt> set the &#x201c;OPTS&#x201d; variable to <tt>-Xmx512m</tt>.</p>
<p>If you specify a source directory but don&#x2019;t want to scan the sub-directories, you can use the non-recursive option:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">$ ./run.sh cpd --minimum-tokens 100 --non-recursive --files /usr/local/java/src/java
</pre></div></div></div>
<div class="section">
<h3><a name="Exit_status"></a>Exit status</h3>
<p>Please note that if CPD detects duplicated source code, it will exit with status 4 (since 5.0). This behavior has been introduced to ease CPD integration into scripts or hooks, such as SVN hooks.</p>

<table border="0" class="table table-striped">

<tr class="a">
<td>0</td>
<td>Everything is fine, now code duplications found</td></tr>

<tr class="b">
<td>1</td>
<td>Couldn't understand command line parameters or CPD exited with an exception</td></tr>

<tr class="a">
<td>4</td>
<td>At least one code duplication has been detected unless '--failOnViolation false' is used.</td></tr>
</table></div>
<div class="section">
<h3><a name="Supported_Languages"></a>Supported Languages</h3>

<ul>
  
<li>cs</li>
  
<li>cpp</li>
  
<li>ecmascript (JavaScript)</li>
  
<li>fortran</li>
  
<li>go</li>
  
<li>java</li>
  
<li>jsp</li>
  
<li>matlab</li>
  
<li>objectivec</li>
  
<li>php</li>
  
<li>plsql</li>
  
<li>python</li>
  
<li>ruby</li>
  
<li>scala</li>
  
<li>swift</li>
</ul></div>
<div class="section">
<h3><a name="Available_formats"></a>Available formats</h3>

<ul>
  
<li>text : Default format</li>
  
<li>xml</li>
  
<li>csv</li>
  
<li>csv_with_linecount_per_file</li>
  
<li>vs</li>
</ul></div></div>
<div class="section">
<h2><a name="Ant_task"></a>Ant task</h2>
<p>Andy Glover wrote an Ant task for CPD; here&#x2019;s how to use it:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;target name=&quot;cpd&quot;&gt;
    &lt;taskdef name=&quot;cpd&quot; classname=&quot;net.sourceforge.pmd.cpd.CPDTask&quot; /&gt;
    &lt;cpd minimumTokenCount=&quot;100&quot; outputFile=&quot;/home/tom/cpd.txt&quot;&gt;
        &lt;fileset dir=&quot;/home/tom/tmp/ant&quot;&gt;
            &lt;include name=&quot;**/*.java&quot;/&gt;
        &lt;/fileset&gt;
    &lt;/cpd&gt;
&lt;/target&gt;
</pre></div></div>

<table class="table table-striped" border="1" cellpadding="2" cellspacing="0">
  
<tr class="a">
    
<td valign="top"><b>Attribute</b></td>
    
<td valign="top"><b>Description</b></td>
    
<td valign="top"><b>Applies for language</b></td>
    
<td align="center" valign="top"><b>Required</b></td>
  </tr>
  
<tr class="b">
    
<td valign="top">encoding</td>
    
<td valign="top">
        The character set encoding (e.g., UTF-8) to use when reading the source code files, but also when
        producing the report. A piece of warning, even if you set properly the encoding value,
        let's say to UTF-8, but you are running CPD encoded with CP1252, you may end up with not UTF-8 file.
        Indeed, CPD copy piece of source code in its report directly, therefore, the source files
        keep their encoding.<br />
        If not specified, CPD uses the system default encoding.
    </td>
    
<td valign="top"></td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="a">
    
<td valign="top">format</td>
    
<td valign="top">The format of the report (e.g. `csv`, `text`, `xml`); defaults to `text`.</td>
    
<td valign="top"></td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="b">
    
<td valign="top">ignoreLiterals</td>
    
<td valign="top">
        if `true`, CPD ignores literal
        value differences when evaluating a duplicate block. This means that `foo=42;` and `foo=43;`
        will be seen as equivalent. You may want to run PMD with this option off to start with and
        then switch it on to see what it turns up; defaults to `false`.
    </td>
    
<td valign="top">java</td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="a">
    
<td valign="top">ignoreIdentifiers</td>
    
<td valign="top">
        Similar to `ignoreLiterals` but for identifiers; i.e., variable names, methods names,
        and so forth; defaults to `false`.
    </td>
    
<td valign="top">java</td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="b">
    
<td valign="top">ignoreAnnotations</td>
    
<td valign="top">
        Ignore annotations. More and more modern frameworks use annotations on classes and methods,
        which can be very redundant and trigger CPD matches. With J2EE (CDI, Transaction Handling, etc)
        and Spring (everything) annotations become very redundant. Often classes or methods have the
        same 5-6 lines of annotations. This causes false positives; defaults to `false`.
    </td>
    
<td valign="top">java</td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="a">
    
<td valign="top">ignoreUsings</td>
    
<td valign="top">
        Ignore using directives in C#.
    </td>
    
<td valign="top">C#</td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="b">
    
<td valign="top">skipDuplicateFiles</td>
    
<td valign="top">
        Ignore multiple copies of files of the same name and length in comparison; defaults to `false`.
    </td>
    
<td valign="top"></td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="a">
    
<td valign="top">skipLexicalErrors</td>
    
<td valign="top">
        Skip files which can't be tokenized due to invalid characters instead of aborting CPD; defaults to `false`.
    </td>
    
<td valign="top"></td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="b">
    
<td valign="top">skipBlocks</td>
    
<td valign="top">
        Enables or disabled skipping of blocks like a pre-processor; defaults to `true`.
        See also option skipBlocksPattern.
    </td>
    
<td valign="top">cpp</td>
    
<td valign="top">No</td>
  </tr>
  
<tr class="a">
    
<td valign="top">skipBlocksPattern</td>
    
<td valign="top">
        Configures the pattern, to find the blocks to skip. It is a string property and contains of two parts,
        separated by `|`. The first part is the start pattern, the second part is the ending pattern.
        The default value is `#if 0|#endif`.
    </td>
    
<td valign="top">cpp</td>
    
<td valign="top">no</td>
  </tr>
  
<tr class="b">
    
<td valign="top">language</td>
    
<td valign="top">
        Flag to select the appropriate language (e.g. `c`, `cpp`, `cs`, `java`, `jsp`, `php`, `ruby`, `fortran`
        `ecmascript`, and `plsql`); defaults to `java`.
    </td>
    
<td valign="top"></td>
    
<td valign="top" align="center">No</td>
  </tr>
  
<tr class="a">
    
<td valign="top">minimumtokencount</td>
    
<td valign="top">A positive integer indicating the minimum duplicate size.</td>
    
<td valign="top"></td>
    
<td valign="top" align="center">Yes</td>
  </tr>
  
<tr class="b">
    
<td valign="top">outputfile</td>
    
<td valign="top">The destination file for the report. If not specified the console will be used instead.</td>
    
<td valign="top"></td>
    
<td valign="top" align="center">No</td>
  </tr>
</table>
<p>Also, you can get verbose output from this task by running ant with the <tt>-v</tt> flag; i.e.:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">ant -v -f mybuildfile.xml cpd
</pre></div></div>
<p>Also, you can get an HTML report from CPD by using the XSLT script in pmd/etc/xslt/cpdhtml.xslt. Just run the CPD task as usual and right after it invoke the Ant XSLT script like this:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">&lt;xslt in=&quot;cpd.xml&quot; style=&quot;etc/xslt/cpdhtml.xslt&quot; out=&quot;cpd.html&quot; /&gt;
</pre></div></div></div>
<div class="section">
<h2><a name="GUI"></a>GUI</h2>
<p>CPD also comes with a simple GUI. You can start it via some scripts in the <tt>bin</tt> folder:</p>
<p>For Windows:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">cpdgui.bat
</pre></div></div>
<p>For Linux:</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">./run.sh cpdgui
</pre></div></div>
<p>Here&#x2019;s a <a href="../images/screenshot_cpd.png">screenshot</a> of CPD after running on the JDK 8 java.lang package:</p>
<p><img src="../images/screenshot_cpd.png" alt="CPD Screenshot after running on the JDK 8 java.lang package" /></p></div>
<div class="section">
<h2><a name="Suppression"></a>Suppression</h2>
<p>Arbitrary blocks of code can be ignored through comments on <b>Java</b> by including the keywords <tt>CPD-OFF</tt> and <tt>CPD-ON</tt>.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">public Object someParameterizedFactoryMethod(int x) throws Exception {
    // some unignored code

    // tell cpd to start ignoring code - CPD-OFF

    // mission critical code, manually loop unroll
    goDoSomethingAwesome(x + x / 2);
    goDoSomethingAwesome(x + x / 2);
    goDoSomethingAwesome(x + x / 2);
    goDoSomethingAwesome(x + x / 2);
    goDoSomethingAwesome(x + x / 2);
    goDoSomethingAwesome(x + x / 2);

    // resume CPD analysis - CPD-ON

    // further code will *not* be ignored
}
</pre></div></div>
<p>Additionally, <b>Java</b> allows to toggle suppression by adding the annotations <b><tt>@SuppressWarnings(&quot;CPD-START&quot;)</tt></b> and <b><tt>@SuppressWarnings(&quot;CPD-END&quot;)</tt></b> all code within will be ignored by CPD.</p>
<p>This approach however, is limited to the locations were <tt>@SuppressWarnings</tt> is accepted. It&#x2019;s legacy and the new comment&#x2019;s based approch should be favored.</p>

<div class="source">
<div class="source"><pre class="prettyprint linenums">//enable suppression
@SuppressWarnings(&quot;CPD-START&quot;)
public Object someParameterizedFactoryMethod(int x) throws Exception {
    // any code here will be ignored for the duplication detection
}
//disable suppression
@SuppressWarnings(&quot;CPD-END)
public void nextMethod() {
}
</pre></div></div>
<p>Other languages currently have no support to suppress CPD reports. In the future, the comment based approach will be extended to those of them that can support it.</p></div>
                  </div>
            </div>
          </div>

    <hr/>

    <footer>
            <div class="container-fluid">
                      <div class="row-fluid">
                                      <p >Copyright &copy;                    2002&#x2013;2017
                        <a href="https://pmd.github.io/">PMD</a>.
            All rights reserved.      
                    
      </p>
                </div>

        
                </div>
    </footer>
        </body>
</html>
